import{t as x,a as d,b as $}from"../chunks/DNFbThfs.js";import"../chunks/BUQwjzWP.js";import{j as at,m as I,l as G,f as m,C as H,o as bt,e as s,r as o,s as v,g as e,i as A,t as F,k as rt,$ as ht}from"../chunks/DoNDGHyy.js";import{s as f}from"../chunks/DC9tgs7-.js";import{i as L}from"../chunks/BX3J5sb_.js";import{h as yt}from"../chunks/C2qLbvVc.js";import{i as ot}from"../chunks/CVtg5WK5.js";import{p as P}from"../chunks/B0y5V2xw.js";import{e as Ft,i as Pt}from"../chunks/CUH4eMiX.js";import{s as tt}from"../chunks/CPhAXEh1.js";import{e as et}from"../chunks/BZLr5Rgo.js";import{p as kt,s as wt}from"../chunks/Bfc47y5P.js";import{I as Bt}from"../chunks/BzFb7UYT.js";import{R as Ct}from"../chunks/Ctx55G5c.js";import{f as J}from"../chunks/AQ33R6NC.js";import"../chunks/DMoKzXAu.js";var It=x('<p class="font-semibold text-sm sm:text-base md:text-xl mt-2"> </p>'),Lt=x('<p class="font-semibold mt-2 text-xs sm:text-base md:text-xl text-black"> </p>'),jt=x('<div class="flex gap-5"><p class="font-semibold mt-2 text-xs sm:text-base md:text-xl text-gray-400 line-through"> </p> <p class="bg-[#FFEBEB] text-[#FF3333] mt-3 md:mt-2 text-[8px] md:text-xs lg:text-sm md:px-3 md:py-1 px-1 py-1 my-auto rounded-full"> </p></div>'),Ut=x('<a class="cursor-pointer group block relative"><div class="transition-transform duration-300 hover:scale-105 relative"><img alt="product-img" class="w-full h-auto object-cover rounded-xl border"> <button type="button" class="absolute top-2 right-3 text-lg z-10" aria-label="Add to favorite"><!></button></div> <h2 class="capitalize text-xs mb-2 md:text-sm lg:text-base font-poppins mt-3"> </h2> <div class="flex gap-3"><!> <p class="text-xs items-center flex"> </p></div> <div class="flex font-poppins gap-4"><!> <!></div></a>'),zt=x('<div class="text-center"><button class="mx-auto mt-10 border px-5 md:px-14 py-2 text-xs sm:text-sm md:text-base font-medium rounded-3xl"><!></button></div>'),At=x('<section class="mx-auto container mt-10 px-4"><h1 class="mx-auto text-center text-lg sm:text-xl md:text-4xl md:mt-10 uppercase font-bold mb-10"> </h1> <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 sm:grid-cols-3"></div> <!></section>');function Et(E,c){at(c,!1);let g=P(c,"title",8),_=P(c,"initialProducts",24,()=>[]),b=P(c,"initialLimit",8,4),M=P(c,"expandBy",8,10),N=P(c,"fetchUrl",8),j=P(c,"slug",8),w=I([..._()]),l=I(b()),p=I(!1),U=I(!0),K=I([]);function st(r){J.update(t=>{const n=t.findIndex(h=>h.id===r.id);return n!==-1?t.splice(n,1):t.push({id:r.id,name:r.name,price:r.price,discount:r.discount,image:r.image}),t})}function it(r){return e(K).some(t=>t.id===r)}async function lt(){m(p,!0),m(l,e(l)+M());try{const t=await(await fetch(`${N()}&limit=${e(l)}`)).json();m(w,t.products),t.products.length<e(l)&&m(U,!1)}catch(r){console.error("Failed to load more products",r),m(U,!1)}m(p,!1)}G(()=>H(_()),()=>{m(w,[..._()])}),G(()=>(H(j()),H(b())),()=>{j()&&(m(l,b()),m(U,!0))}),G(()=>J,()=>{J.subscribe(r=>{m(K,r)})}),bt(),ot();var R=At(),V=s(R),nt=s(V,!0);o(V);var q=v(V,2);Ft(q,5,()=>e(w),Pt,(r,t)=>{var n=Ut(),h=s(n),z=s(h),B=v(z,2),u=s(B);const C=A(()=>it(e(t).id)?"material-symbols:favorite":"material-symbols:favorite-outline");Bt(u,{get icon(){return e(C)}}),o(B),o(h);var D=v(h,2),pt=s(D,!0);o(D);var T=v(D,2),O=s(T);const mt=A(()=>{var i;return(i=e(t))==null?void 0:i.rating});Ct(O,{get rate(){return e(mt)}});var Q=v(O,2),vt=s(Q);o(Q),o(T);var S=v(T,2),W=s(S);{var xt=i=>{var a=It(),y=s(a);o(a),F(k=>f(y,`$${k??""}`),[()=>(e(t).price-e(t).price*e(t).discount/100).toFixed(2)],A),d(i,a)},ut=i=>{var a=Lt(),y=s(a);o(a),F(()=>{var k;return f(y,`$${((k=e(t))==null?void 0:k.price)??""}`)}),d(i,a)};L(W,i=>{var a;(a=e(t))!=null&&a.discount?i(xt):i(ut,!1)})}var ft=v(W,2);{var gt=i=>{var a=jt(),y=s(a),k=s(y);o(y);var X=v(y,2),_t=s(X);o(X),o(a),F(()=>{var Y,Z;f(k,`$${((Y=e(t))==null?void 0:Y.price)??""}`),f(_t,`- ${((Z=e(t))==null?void 0:Z.discount)??""} %`)}),d(i,a)};L(ft,i=>{var a;(a=e(t))!=null&&a.discount&&i(gt)})}o(S),o(n),F(()=>{var i,a;tt(n,"href",`/product-details/${e(t).id}`),tt(z,"src",(i=e(t))==null?void 0:i.image),f(pt,(a=e(t))==null?void 0:a.name),f(vt,`${e(t).rating??""}/5`)}),et("click",B,kt(wt(()=>st(e(t))))),d(r,n)}),o(q);var dt=v(q,2);{var ct=r=>{var t=zt(),n=s(t),h=s(n);{var z=u=>{var C=$("Loading...");d(u,C)},B=u=>{var C=$("View More");d(u,C)};L(h,u=>{e(p)?u(z):u(B,!1)})}o(n),o(t),F(()=>n.disabled=e(p)),et("click",n,lt),d(r,t)};L(dt,r=>{e(U)&&r(ct)})}o(R),F(()=>f(nt,g())),d(E,R),rt()}var Mt=x('<meta name="description" content="Product Category Page">'),Nt=x("<p>No products found in this category.</p>"),Rt=x('<section class="container mx-auto px-4 py-10 mt-10"><h1 class=" text-base sm:text-lg text-center md:text-2xl font-bold lg:mt-0 mt-10 sm:mt-20 mb-6"> </h1> <!></section>');function te(E,c){at(c,!1);let g=P(c,"data",8);ot();var _=Rt();yt(l=>{var p=Mt();ht.title="Category",d(l,p)});var b=s(_),M=s(b);o(b);var N=v(b,2);{var j=l=>{const p=A(()=>`/api/category-products?slug=${g().slug}`);Et(l,{get initialProducts(){return g().products},get fetchUrl(){return e(p)},initialLimit:4,get slug(){return g().slug},expandBy:10})},w=l=>{var p=Nt();d(l,p)};L(N,l=>{g().products.length>0?l(j):l(w,!1)})}o(_),F(()=>f(M,`Products in ${g().categoryName??""}`)),d(E,_),rt()}export{te as component};

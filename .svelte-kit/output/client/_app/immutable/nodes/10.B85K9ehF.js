import{t as u,a as m}from"../chunks/DNFbThfs.js";import"../chunks/BUQwjzWP.js";import{j,k as A,e as s,g as c,m as _,r as o,s as i,f as n,n as D,t as L}from"../chunks/DoNDGHyy.js";import{s as q}from"../chunks/DC9tgs7-.js";import{i as x}from"../chunks/BX3J5sb_.js";import{r as M}from"../chunks/CPhAXEh1.js";import{e as g}from"../chunks/BZLr5Rgo.js";import{b as O}from"../chunks/06K-g5fM.js";import{i as Y}from"../chunks/CVtg5WK5.js";import{p as H}from"../chunks/B0y5V2xw.js";import{s as J,P as z,a as G}from"../chunks/aYqcQ64t.js";var K=u('<p class="text-green-600 mt-2"> </p>'),Q=u('<p class="text-red-600 mt-2"> </p>'),V=u('<div><label for="email">Enter your email to get reset link</label> <input placeholder="Your email" class="w-full p-2 mt-2 rounded-md border border-black bg-[#F0F0F0]"> <button class="mt-5 px-4 py-2 bg-black text-white rounded">Send Reset Link</button> <!> <!> <div class="mt-5"><button class="underline">Back</button></div></div>'),W=u('<div><h1 class="mb-4">Password</h1> <p class="mb-3">*******</p> <p class="text-red-600 font-medium"><span class="px-3 py-1 font-bold rounded-full border border-red-600">!</span> You already have a password. Do you want to <button class="underline">reset</button> it or <button class="underline">forgot</button> it?</p></div>'),X=u('<section class="container mx-auto p-4 bg-white rounded-lg"><div class="p-5"><!></div></section>');function pe(S,y){j(y,!1);let h=_(""),v=_(""),b=_(""),f=_("");async function C(){var a,d;n(v,""),n(b,"");const e=await(await fetch(J,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:`
					mutation RequestPasswordReset($email: String!, $redirectUrl: String!, $channel: String!) {
						requestPasswordReset(email: $email, redirectUrl: $redirectUrl, channel: $channel) {
							errors {
								field
								message
							}
						}
					}
				`,variables:{email:c(h),redirectUrl:`${G}reset-password`,channel:z}})})).json();console.log("Reset request response:",e);const t=(d=(a=e==null?void 0:e.data)==null?void 0:a.requestPasswordReset)==null?void 0:d.errors;t!=null&&t.length?n(b,t[0].message):n(v,"âœ… Password reset link sent to your email.")}let E=H(y,"data",8);console.log("Logged in user:",E().user),Y();var k=X(),R=s(k),B=s(R);{var F=l=>{var e=V(),t=i(s(e),2);M(t);var a=i(t,2),d=i(a,2);{var N=r=>{var p=K(),w=s(p,!0);o(p),L(()=>q(w,c(v))),m(r,p)};x(d,r=>{c(v)&&r(N)})}var P=i(d,2);{var T=r=>{var p=Q(),w=s(p,!0);o(p),L(()=>q(w,c(b))),m(r,p)};x(P,r=>{c(b)&&r(T)})}var U=i(P,2),$=s(U);o(U),o(e),O(t,()=>c(h),r=>n(h,r)),g("click",a,C),g("click",$,()=>n(f,"")),m(l,e)},I=l=>{var e=W(),t=i(s(e),4),a=i(s(t),2),d=i(a,2);D(),o(t),o(e),g("click",a,()=>n(f,"reset")),g("click",d,()=>n(f,"forgot")),m(l,e)};x(B,l=>{c(f)==="reset"?l(F):l(I,!1)})}o(R),o(k),m(S,k),A()}export{pe as component};

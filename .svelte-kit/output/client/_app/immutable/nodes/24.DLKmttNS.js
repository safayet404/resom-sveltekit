var At=t=>{throw TypeError(t)};var Pt=(t,e,o)=>e.has(t)||At("Cannot "+o);var lt=(t,e,o)=>(Pt(t,e,"read from private field"),o?o.call(t):e.get(t)),ct=(t,e,o)=>e.has(t)?At("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),dt=(t,e,o,c)=>(Pt(t,e,"write to private field"),c?c.call(t,o):e.set(t,o),o);import{t as U,a as j,b as tt}from"../chunks/DNFbThfs.js";import{f as ht,aW as ae,g as s,a0 as re,x as se,w as oe,aT as ie,j as ne,s as E,u as ut,t as R,k as le,aX as ce,$ as de,e as T,aU as h,r as z}from"../chunks/DoNDGHyy.js";import{s as V}from"../chunks/DC9tgs7-.js";import{i as I}from"../chunks/BX3J5sb_.js";import{e as et,i as ue}from"../chunks/CUH4eMiX.js";import{h as ve}from"../chunks/C2qLbvVc.js";import{a as zt}from"../chunks/gMBXBIkb.js";import{a as X,r as fe,d as St,s as Wt,e as me}from"../chunks/CPhAXEh1.js";import{o as pe,d as be,e as ye}from"../chunks/BZLr5Rgo.js";import{p as he}from"../chunks/B0y5V2xw.js";import{i as ge,a as _e,p as xe,b as we}from"../chunks/1o6BxO2k.js";function ke(t){ht(t,t.v+1)}function je(t){let e=0,o=re(0),c;return()=>{ae()&&(s(o),se(()=>(e===0&&(c=oe(()=>t(()=>ke(o)))),e+=1,()=>{ie().then(()=>{e-=1,e===0&&(c==null||c(),c=void 0)})})))}}var Z,$;class Ae{constructor(e,o){ct(this,Z);ct(this,$);dt(this,Z,e),dt(this,$,je(o))}get current(){return lt(this,$).call(this),lt(this,Z).call(this)}}Z=new WeakMap,$=new WeakMap;const Pe=/\(.+\)/;class ze extends Ae{constructor(e,o){let c=Pe.test(e)?e:`(${e})`;const n=window.matchMedia(c);super(()=>n.matches,g=>pe(n,"change",g))}}function Se(t){const e=JSON.parse(t);return e.data&&(e.data=xe(e.data,we.decoders)),e}function vt(t){return HTMLElement.prototype.cloneNode.call(t)}function ft(t,e=()=>{}){const o=async({action:n,result:g,reset:b=!0,invalidateAll:f=!0})=>{g.type==="success"&&(b&&HTMLFormElement.prototype.reset.call(t),f&&await ge()),(location.origin+location.pathname===n.origin+n.pathname||g.type==="redirect"||g.type==="error")&&await _e(g)};async function c(n){var D,O,H,q,d;if(((D=n.submitter)!=null&&D.hasAttribute("formmethod")?n.submitter.formMethod:vt(t).method)!=="post")return;n.preventDefault();const b=new URL((O=n.submitter)!=null&&O.hasAttribute("formaction")?n.submitter.formAction:vt(t).action),f=(H=n.submitter)!=null&&H.hasAttribute("formenctype")?n.submitter.formEnctype:vt(t).enctype,_=new FormData(t),C=(q=n.submitter)==null?void 0:q.getAttribute("name");C&&_.append(C,((d=n.submitter)==null?void 0:d.getAttribute("value"))??"");const N=new AbortController;let F=!1;const S=await e({action:b,cancel:()=>F=!0,controller:N,formData:_,formElement:t,submitter:n.submitter})??o;if(F)return;let x;try{const i=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&i.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const P=f==="multipart/form-data"?_:new URLSearchParams(_),r=await fetch(b,{method:"POST",headers:i,cache:"no-store",body:P,signal:N.signal});x=Se(await r.text()),x.type==="error"&&(x.status=r.status)}catch(i){if((i==null?void 0:i.name)==="AbortError")return;x={type:"error",error:i}}await S({action:b,formData:_,formElement:t,update:i=>o({action:b,result:x,reset:i==null?void 0:i.reset,invalidateAll:i==null?void 0:i.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",c),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",c)}}}var Et="mz3PUW_p",Mt=["#FFC700","#FF0000","#2E3191","#41BBC7"],Ut=3500,Lt=.5,Ht=150,Tt="mix",Ct=12,Ft="",Dt=!0,Nt=800,Ot=1600;function mt(t,e={}){let{colors:o=Mt,duration:c=Ut,force:n=Lt,particleCount:g=Ht,particleShape:b=Tt,particleSize:f=Ct,particleClass:_=Ft,destroyAfterDone:C=Dt,stageHeight:N=Nt,stageWidth:F=Ot}=e;(function(d){if(document.querySelector("style[data-neoconfetti]"))return;const i=pt("style");i.dataset.neoconfetti="",i.textContent=d,bt(document.head,i)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",N+"px");let L=[],S=[];const x=()=>Y(M()*(Le-1)),D=(d,i)=>b!=="rectangles"&&(d==="circles"||He(i));function O(d,i){const P=x(),r=D(b,P),a=(m,y)=>d.style.setProperty(m,y+"");a("--xlp",yt(at(Bt(i,90)-180),0,180,-F/2,F/2)+"px"),a("--dc",c-Y(1e3*M())+"ms");const l=M()<Ee?Q(M()*Me,2):0;a("--x1",l),a("--x2",-1*l),a("--x3",l),a("--x4",Q(at(yt(at(Bt(i,90)-180),0,180,-1,1)),4)),a("--y1",Q(M()*Jt,4)),a("--y2",Q(M()*n*(Qt()?1:-1),4)),a("--y3",Jt),a("--y4",Q(Ue(yt(at(i-180),0,180,n,-n),0),4)),a("--w",(r?f:Y(4*M())+f/2)+"px"),a("--h",(r?f:Y(2*M())+f)+"px");const u=P.toString(2).padStart(3,"0").split("");a("--hr",u.map(m=>+m/2+"").join(" ")),a("--r",u.join(" ")),a("--rd",Q(M()*(We-qt)+qt)+"ms"),a("--br",r?"50%":0)}let H;function q(){t.innerHTML="",clearTimeout(H),L=Rt(g,o),S=function(d,i=[],P){const r=[];for(const{color:a}of i){const l=pt("div");l.className=`${Et} ${P}`,l.style.setProperty("--bgc",a);const u=pt("div");bt(l,u),bt(d,l),r.push(l)}return r}(t,L,_);for(const[d,i]of Kt(S))O(i,L[+d].degree);H=setTimeout(()=>{C&&(t.innerHTML="")},c)}return q(),{update(d){const i=d.particleCount??Ht,P=d.particleShape??Tt,r=d.particleSize??Ct,a=d.particleClass??Ft,l=d.colors??Mt,u=d.stageHeight??Nt,m=d.duration??Ut,y=d.force??Lt,v=d.stageWidth??Ot,W=d.destroyAfterDone??Dt;L=Rt(i,l);let w=!1;if(i===g){S=Array.from(t.querySelectorAll(`.${Et}`));for(const[J,{color:A}]of Kt(L)){const p=S[+J];JSON.stringify(o)!==JSON.stringify(l)&&p.style.setProperty("--bgc",A),P!==b&&p.style.setProperty("--br",D(P,x())?"50%":"0"),a!==_&&(_&&p.classList.remove(_),a&&p.classList.add(a))}}else w=!0;C&&!W&&clearTimeout(H),t.style.setProperty("--sh",u+"px"),c=m,o=l,n=y,g=i,b=P,f=r,_=a,C=W,N=u,F=v,w&&q()},destroy(){t.innerHTML="",clearTimeout(H)}}}var qt=200,We=800,Ee=.1,Me=.3,Jt=.5,at=Math.abs,M=Math.random,Y=Math.round,Ue=Math.max,pt=t=>document.createElement(t),bt=(t,e)=>t.appendChild(e),Rt=(t,e)=>Array.from({length:t},(o,c)=>({color:e[c%e.length],degree:360*c/t})),Q=(t,e=2)=>Y((t+Number.EPSILON)*10**e)/10**e,yt=(t,e,o,c,n)=>(t-e)*(n-c)/(o-e)+c,Bt=(t,e)=>t+e>360?t+e-360:t+e,Qt=()=>M()>.5,Kt=Object.entries,Le=6,He=t=>t!==1&&Qt();function It(t,e,o){var n;t.preventDefault();const c=t.target.getAttribute("data-key");c==="backspace"?(ht(e,s(e).slice(0,-1),!0),(n=o())!=null&&n.badGuess&&o(o().badGuess=!1,!0)):s(e).length<5&&ht(e,s(e)+c)}var Te=U('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),Ce=U('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Fe=U('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),De=U('<p class="svelte-1pg2j5l"> </p>'),Ne=U('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Oe=U('<button formaction="?/update" name="key"> </button>'),qe=U('<div class="row svelte-1pg2j5l"></div>'),Je=U('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Re=U('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Be=U('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function ra(t,e){ne(e,!0);let o=he(e,"form",15);const c=new ze("(prefers-reduced-motion: reduce)");let n=h(()=>e.data.answers.at(-1)==="xxxxx"),g=h(()=>s(n)?-1:e.data.answers.length),b=h(()=>e.data.guesses[s(g)]||""),f=h(()=>s(b).length===5);const _=h(()=>{let r={},a={};return e.data.answers.forEach((l,u)=>{const m=e.data.guesses[u];for(let y=0;y<5;y+=1){const v=m[y];l[y]==="x"?(r[v]="exact",a[v]="correct"):r[v]||(r[v]=l[y]==="c"?"close":"missing",a[v]=l[y]==="c"?"present":"absent")}}),{classnames:r,description:a}}),C=h(()=>s(_).classnames),N=h(()=>s(_).description);function F(r){var a;r.metaKey||r.key==="Enter"&&!s(f)||(a=document.querySelector(`[data-key="${r.key}" i]`))==null||a.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var L=Be();ye("keydown",ce,F),ve(r=>{var a=Te();de.title="Sverdle",j(r,a)});var S=E(ut(L),2),x=E(T(S),2);let D;et(x,20,()=>Array.from(Array(6).keys()),r=>r,(r,a)=>{var l=Fe();const u=h(()=>a===s(g));var m=ut(l),y=T(m);z(m);var v=E(m,2);let W;et(v,20,()=>Array.from(Array(5).keys()),w=>w,(w,J)=>{var A=Ce();const p=h(()=>s(u)?s(b):e.data.guesses[a]),G=h(()=>{var k;return(k=e.data.answers[a])==null?void 0:k[J]}),gt=h(()=>{var k;return((k=s(p))==null?void 0:k[J])??""}),Gt=h(()=>s(u)&&J===s(p).length),_t=h(()=>s(G)==="x"),xt=h(()=>s(G)==="c"),wt=h(()=>s(G)==="_");let kt;var jt=T(A),rt=E(jt),Vt=T(rt);{var Xt=k=>{var ot=tt("(correct)");j(k,ot)},Yt=(k,ot)=>{{var Zt=B=>{var it=tt("(present)");j(B,it)},$t=(B,it)=>{{var te=K=>{var nt=tt("(absent)");j(K,nt)},ee=K=>{var nt=tt("empty");j(K,nt)};I(B,K=>{s(wt)?K(te):K(ee,!1)},it)}};I(k,B=>{s(xt)?B(Zt):B($t,!1)},ot)}};I(Vt,k=>{s(_t)?k(Xt):k(Yt,!1)})}z(rt);var st=E(rt,2);fe(st),z(A),R(k=>{kt=X(A,1,"letter svelte-1pg2j5l",null,kt,k),V(jt,`${s(gt)??""} `),st.disabled=!s(u),St(st,s(gt))},[()=>({exact:s(_t),close:s(xt),missing:s(wt),selected:s(Gt)})]),j(w,A)}),z(v),R(w=>{V(y,`Row ${a+1}`),W=X(v,1,"row svelte-1pg2j5l",null,W,w)},[()=>({current:s(u)})]),j(r,l)}),z(x);var O=E(x,2),H=T(O);{var q=r=>{var a=Ne(),l=ut(a);{var u=v=>{var W=De(),w=T(W);z(W),R(()=>V(w,`the answer was "${e.data.answer??""}"`)),j(v,W)};I(l,v=>{!s(n)&&e.data.answer&&v(u)})}var m=E(l,2),y=T(m);z(m),R(()=>V(y,`${s(n)?"you won :)":"game over :("} play again?`)),j(r,a)},d=r=>{var a=Je(),l=T(a);let u;var m=E(l,2);m.__click=[It,b,o];var y=E(m,2);et(y,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],v=>v,(v,W)=>{var w=qe();et(w,21,()=>W,ue,(J,A)=>{var p=Oe();p.__click=[It,b,o];var G=T(p,!0);z(p),R(()=>{Wt(p,"data-key",s(A)),X(p,1,me(s(C)[s(A)]),"svelte-1pg2j5l"),p.disabled=s(f),St(p,s(A)),Wt(p,"aria-label",`${s(A)??""} ${(s(N)[s(A)]||"")??""}`),V(G,s(A))}),j(J,p)}),z(w),j(v,w)}),z(a),R(v=>{l.disabled=!s(f),u=X(l,1,"svelte-1pg2j5l",null,u,v)},[()=>({selected:s(f)})]),j(r,a)};I(H,r=>{s(n)||e.data.answers.length>=6?r(q):r(d,!1)})}z(O),z(S),zt(S,(r,a)=>ft==null?void 0:ft(r,a),()=>()=>({update:r})=>{r({reset:!1})});var i=E(S,2);{var P=r=>{var a=Re();zt(a,(l,u)=>mt==null?void 0:mt(l,u),()=>({particleCount:c.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),j(r,a)};I(i,r=>{s(n)&&r(P)})}R(r=>D=X(x,1,"grid svelte-1pg2j5l",null,D,r),[()=>{var r;return{playing:!s(n),"bad-guess":(r=o())==null?void 0:r.badGuess}}]),j(t,L),le()}be(["click"]);export{ra as component};
